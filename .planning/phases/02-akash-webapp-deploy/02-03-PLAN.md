---
phase: 02-akash-webapp-deploy
plan: 03
type: execute
wave: 3
depends_on:
  - 02-01-PLAN.md
  - 02-02-PLAN.md
files_modified:
  - offchain/src/app/buyer/submit/page.tsx
  - offchain/src/components/akash/template-gallery.tsx
  - offchain/src/components/akash/natural-language-input.tsx
  - offchain/src/components/akash/sdl-editor.tsx
  - offchain/src/components/akash/requirements-form.tsx
autonomous: false
user_setup:
  - service: Akash Console API
    why: "Job submission triggers real Akash deployments"
    env_vars:
      - name: AKASH_CONSOLE_API_KEY
        source: "Akash Console dashboard"
must_haves:
  truths:
    - "Job submission form includes Akash option as primary deployment target"
    - "Template gallery displays 6+ common workload templates"
    - "Natural language input allows users to describe jobs in plain text"
    - "Agent crafts custom SDL from natural language descriptions"
    - "Full SDL customization available after initial generation"
    - "Auto-sign toggle for streamlined hackathon demo flow"
    - "Escrow deposit integrated into submission flow"
  artifacts:
    - path: "offchain/src/components/akash/template-gallery.tsx"
      provides: "Template browser and selector component"
      exports: ["TemplateGallery", "TemplateCard"]
    - path: "offchain/src/components/akash/natural-language-input.tsx"
      provides: "Natural language job description input"
      exports: ["NaturalLanguageInput"]
    - path: "offchain/src/components/akash/sdl-editor.tsx"
      provides: "SDL editing interface with validation"
      exports: ["SdlEditor", "YamlEditor"]
    - path: "offchain/src/components/akash/requirements-form.tsx"
      provides: "Structured requirements form component"
      exports: ["RequirementsForm"]
    - path: "offchain/src/app/buyer/submit/page.tsx"
      provides: "Complete job submission page"
      exports: ["default"]
  key_links:
    - from: "offchain/src/app/buyer/submit/page.tsx"
      to: "offchain/src/components/akash/template-gallery.tsx"
      via: "Submission page includes template selection"
---

<objective>
Create the job submission interface with template gallery, natural language input, and SDL editor. Enable users to submit compute jobs to Akash with an intuitive, flexible workflow.

Purpose: Provide multiple entry points for job creation - templates for common workloads, natural language for quick descriptions, and full SDL editing for advanced users.

Output: Complete job submission page with template gallery, NL input, SDL editor, and integrated deployment flow.
</objective>

<execution_context>
@/home/julius/.claude/get-shit-done/workflows/execute-plan.md
@/home/julius/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/02-akash-webapp-deploy/02-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create template gallery component</name>
  <files>offchain/src/components/akash/template-gallery.tsx</files>
  <action>
    Create `offchain/src/components/akash/template-gallery.tsx` with:
    - Template browser with category tabs (AI, Compute, Storage, Web)
    - Search functionality
    - Template cards with specs preview
    - Quick select for popular templates
    - Integration with SdlTemplate type from sdl-generator.ts
    
    Use Card, Badge, Tabs, Input from shadcn/ui.
    Include icons from lucide-react for categories.
  </action>
  <verify>
    Run `npx eslint offchain/src/components/akash/template-gallery.tsx` - no lint errors.
    Verify all Lucide icons are available.
    Check shadcn Tabs component exists.
  </verify>
  <done>
    TemplateGallery with category tabs and search.
    TemplateCard with specs preview and tags.
    TemplateQuickSelect for popular templates.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create natural language input component</name>
  <files>offchain/src/components/akash/natural-language-input.tsx</files>
  <action>
    Create `offchain/src/components/akash/natural-language-input.tsx` with:
    - Textarea for natural language job description
    - Example suggestions (PyTorch, Jupyter, Stable Diffusion, Ollama, NGINX)
    - Parse button that calls parseNaturalLanguage from sdl-generator.ts
    - Parsed result display showing detected CPU, memory, GPU, image
    - Loading state with spinner
    - Error handling
    
    Use Textarea, Button, Card, Badge from shadcn/ui.
  </action>
  <verify>
    Run `npx eslint offchain/src/components/akash/natural-language-input.tsx` - no lint errors.
    Verify Textarea component exists in shadcn.
    Test parseNaturalLanguage with example inputs.
  </verify>
  <done>
    NaturalLanguageInput with example buttons.
    Parsed result display with specs.
    Suggestions component for quick picks.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create SDL editor and requirements form</name>
  <files>offchain/src/components/akash/sdl-editor.tsx, offchain/src/components/akash/requirements-form.tsx</files>
  <action>
    Create `offchain/src/components/akash/sdl-editor.tsx` with:
    - YAML editor using Textarea with monospace font
    - Copy and Download buttons for SDL
    - Validation status indicator
    - Shows modification badge when edited
    - Read-only mode support
    
    Create `offchain/src/components/akash/requirements-form.tsx` with:
    - Form inputs for CPU, memory, storage, GPU
    - Image selection
    - Port configuration
    - Environment variables
    - Region selector
    - Validation
    
    Use Card, Button, Textarea, Badge, Alert, Input, Select from shadcn/ui.
  </action>
  <verify>
    Run `npx eslint offchain/src/components/akash/sdl-editor.tsx` - no lint errors.
    Run `npx eslint offchain/src/components/akash/requirements-form.tsx` - no lint errors.
    Verify both components compile correctly.
  </verify>
  <done>
    SdlEditor with YAML editing and validation.
    RequirementsForm with structured inputs.
  </done>
</task>

<task type="auto">
  <name>Task 4: Create integrated job submission page</name>
  <files>offchain/src/app/buyer/submit/page.tsx</files>
  <action>
    Create `offchain/src/app/buyer/submit/page.tsx` with:
    - Multi-step wizard: Template/NL -> Requirements -> SDL -> Review -> Submit
    - Tab-based interface for different entry methods
    - Template Gallery tab
    - Natural Language tab
    - Manual Configuration tab
    - SDL Editor with live preview
    - Provider selection integration
    - USDC escrow deposit step
    - Auto-sign toggle
    - Deployment status display
    - Progress tracking
    - Error handling and validation
    
    Integrate with:
    - TemplateGallery component
    - NaturalLanguageInput component
    - RequirementsForm component
    - SdlEditor component
    - ProviderList component
    - DeploymentStatus component
    - useAkashDeployment hook
    - Escrow contract for testnet USDC
    
    Use all necessary shadcn/ui components.
  </action>
  <verify>
    Run `npx eslint offchain/src/app/buyer/submit/page.tsx` - no lint errors.
    Verify page builds without errors.
    Test navigation between tabs.
    Ensure all imports resolve.
  </verify>
  <done>
    Complete job submission page with multi-step flow.
    All input methods integrated (templates, NL, manual).
    Escrow and deployment status integrated.
  </done>
</task>

</tasks>
